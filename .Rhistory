# setwd("~")
# webshot::webshot(url = "plot.html",
#                  file = "plot.png")
plot
# Main code
plot$save("/tmp/rcharts.html")
webshot::webshot("/tmp/rcharts.html", file="/tmp/out.png", delay=2)
# Main code
plot$save("/rcharts.html")
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
shiny::runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
runApp('CWON-dashboard')
install.packages("orca")
library(highcharter)
library(plyr)
library(orca)
data("citytemp")
plot <- highchart() %>%
hc_add_series(name = "London", data = citytemp$london, type = "area") %>%
hc_rm_series(name = "New York")
# htmlwidgets::saveWidget(widget = plot, file = "~/plot.html")
# setwd("~")
# webshot::webshot(url = "plot.html",
#                  file = "plot.png")
plot
# Main code
#plot$save("/rcharts.html")
#webshot::webshot("/tmp/rcharts.html", file="/tmp/out.png", delay=2)
orca(plot, file = "image.png")
runApp('CWON-dashboard')
shiny::runApp('CWON-dashboard')
shiny::runApp('CWON-dashboard')
runApp('CWON-dashboard')
getwd()
create(wbincomeclass)
library(devtools)
library(roxygen2)
create(wbincomeclass)
create("wbincomeclass")
setwd("C:/Users/wb482273/OneDrive - WBG/Documents/wbincomeclass")
document()
document()
library(devtools)
library(roxygen2)
document()
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969") %>%
rename(countryname = country,
date = year)
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
names(hist)[names(hist) == "country"] = "countryname"
names(hist)[names(hist) == "year"] = "date"
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- hist[date >= startyear & date <= endyear & wb_code %in% country,]
document()
library(devtools)
library(roxygen2)
document()
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
data <- hist[date >= first & date <= last & wb_code %in% all,]
hist <- data.table::setDT(hist)
names(hist)[names(hist) == "country"] = "countryname"
names(hist)[names(hist) == "year"] = "date"
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- hist[date >= first & date <= last & wb_code %in% all,]
data <- hist[(date >= first) & (date <= last) & (wb_code %in% all),]
wbincomeclass(startyear = 2010, endyear = 2012, country = "ALB")
wbincomeclass <- function(country = all, startyear = first, endyear = last) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
names(hist)[names(hist) == "country"] = "countryname"
names(hist)[names(hist) == "year"] = "date"
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- hist[date >= startyear & date <= endyear & wb_code %in% country,]
}
wbincomeclass(startyear = 2010, endyear = 2012, country = "ALB")
wbincomeclass <- function(country = all, startyear = first, endyear = last) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
names(hist)[names(hist) == "country"] = "countryname"
names(hist)[names(hist) == "year"] = "date"
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- data.table::hist[date >= startyear & date <= endyear & wb_code %in% country,]
}
wbincomeclass(startyear = 2010, endyear = 2012, country = "ALB")
wbincomeclass <- function(country = all, startyear = first, endyear = last) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
names(hist)[names(hist) == "country"] = "countryname"
names(hist)[names(hist) == "year"] = "date"
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- hist[date >= startyear & date <= endyear & wb_code %in% country,]
}
wbincomeclass()
dat<- wbincomeclass()
View(dat)
library(devtools)
library(roxygen2)
document()
rm(list = c("wbincomeclass"))
dat<- wbincomeclass()
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
#  data <- hist[date >= startyear & date <= endyear & wb_code %in% country,]
data <- hist
}
dat <- wbincomeclass()
library(devtools)
document()
rm(list = c("wbincomeclass"))
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
hist <- data.table::setDT(hist)
first <- min(hist$date)
last <- max(hist$date)
all <- unique(hist$wb_code)
data <- hist[date >= startyear,]
#  data <- hist[date >= startyear & date <= endyear & wb_code %in% country,]
}
dat<- wbincomeclass()
library(devtools)
library(roxygen2)
document()
rm(list = c("wbincomeclass"))
library(devtools)
library(roxygen2)
document()
library(devtools)
library(roxygen2)
document()
library(devtools)
library(roxygen2)
document()
library(devtools)
library(roxygen2)
document()
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
View(hist)
library(devtools)
library(roxygen2)
document()
library(devtools)
library(roxygen2)
document()
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
first <- min(hist$datayear)
last <- max(hist$datayear)
all <- unique(hist$wb_code)
data <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
dat <- wbincomeclass(country = all, startyear = first, endyear = last)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
first <- min(hist$datayear)
last <- max(hist$datayear)
all <- unique(hist$wb_code)
data <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
dat <- wbincomeclass(country = all, startyear = first, endyear = last)
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
first <- min(hist$datayear)
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
first <- min(hist$datayear)
last <- max(hist$datayear)
all <- unique(hist$wb_code)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == all) {
data <- hist[hist$datayear <= endyear & hist$datayear >= startyear,]
} else {
data <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
# if (country == all) {
#
#   data <- hist[hist$datayear <= endyear & hist$datayear >= startyear,]
#
# } else {
data <- ifelse(country == all, hist[hist$datayear <= endyear & hist$datayear >= startyear,],
hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,])
# }
}
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
View(dat)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
# if (country == all) {
#
#   data <- hist[hist$datayear <= endyear & hist$datayear >= startyear,]
#
# } else {
data <- ifelse(country == all, hist[hist$datayear <= endyear & hist$datayear >= startyear,],
hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,])
data <- as.data.frame(data)
# }
}
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
View(dat)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
# if (country == all) {
#
#   data <- hist[hist$datayear <= endyear & hist$datayear >= startyear,]
#
# } else {
data <- ifelse(country == all, hist[hist$datayear <= endyear & hist$datayear >= startyear,],
hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,])
# data <- as.data.frame(data)
# }
}
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
View(dat)
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country != all) {
hist <- hist[hist$wb_code %in% country,]
} else {
if (startyear != first) {
data <- hist[hist$datayear >= startyear,]
} else {
if (endyear != last) {
data <- hist[hist$datayear <= endyear,]
}
} else{
data <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
}
wbincomeclass <- function(country = "IND", startyear = 1995, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country != all) {
hist <- hist[hist$wb_code %in% country,]
} else if (startyear != first) {
hist <- hist[hist$datayear >= startyear,]
} else if (endyear != last) {
hist <- hist[hist$datayear <= endyear,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dat <- wbincomeclass(country = all, startyear = 1995, endyear = 2010)
dat <- wbincomeclass(country = all, startyear = first, endyear = last)
dat <- wbincomeclass(country = all2, startyear = first, endyear = last)
dat <- wbincomeclass(country = c("IND", "PAK"), startyear = first, endyear = last)
View(dat)
wbincomeclass <- function(country = all, startyear = first, endyear = last) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country != all) {
hist <- hist[hist$wb_code %in% country,]
} else if (startyear != first) {
hist <- hist[hist$datayear >= startyear,]
} else if (endyear != last) {
hist <- hist[hist$datayear <= endyear,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dat <- wbincomeclass()
wbincomeclass <- function(country = all, startyear = first, endyear = last) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country != all) {
hist <- hist %>%
dplyr::filter(wb_code %in% country)
} else if (startyear != first) {
hist <- hist[hist$datayear >= startyear,]
} else if (endyear != last) {
hist <- hist[hist$datayear <= endyear,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dat <- wbincomeclass()
dat <- wbincomeclass(country = c("IND", "PAK"), startyear = first, endyear = last)
dat <- wbincomeclass()
library(devtools)
library(roxygen2)
document()
rm(list = c("wbincomeclass"))
document()
library(devtools)
library(roxygen2)
document()
newcache <- wbstats::wbcache()
View(newcache)
countries_df <- wb_newcache$countries
countries_df <- newcache$countries
View(countries_df)
countries_df <- newcache$countries$iso3c
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
wbincomeclass <- function(country = "all", startyear = 1987, endyear = "last") {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == "all") {
newcache <- wbstats::wbcache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% countrylist,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dataiwant <- wbincomeclass()
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2019) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == "all") {
newcache <- wbstats::wbcache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% countrylist,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dataiwant <- wbincomeclass()
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2010) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == "all") {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% countrylist,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dataiwant <- wbincomeclass()
View(dataiwant)
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2019) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == "all") {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% countrylist,]
} else {
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
}
dataiwant <- wbincomeclass(endyear = 2010)
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2019) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
if (country == "all") {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
country <- countrylist
}
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
dataiwant <- wbincomeclass(endyear = 2010)
dataiwant <- wbincomeclass(startyear = 2010, endyear = 2010)
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2019) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
if (country == "all") {
country <- countrylist
}
if (startyear == "first") {
startyear <- 1987
}
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
dataiwant <- wbincomeclass(startyear = 2010, endyear = 2010)
View(dataiwant)
dataiwant <- wbincomeclass(country = "IND", startyear = 2010, endyear = 2010)
View(dataiwant)
dataiwant <- wbincomeclass(country = "IND", startyear = first, endyear = 2010)
dataiwant <- wbincomeclass(country = "IND", startyear = "first", endyear = 2010)
View(dataiwant)
endyear <- format(Sys.Date(), "%Y")
wbincomeclass <- function(country = "all", startyear = 1987, endyear = 2019) {
hist <- googlesheets4::read_sheet("https://docs.google.com/spreadsheets/d/1ose4ar0k3Bfty_fLwYcOfIBKsYv_3GAqiJD41swczOA/edit#gid=744413969")
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
if (country == "all") {
country <- countrylist
}
if (startyear == "first") {
startyear <- 1987
}
if (endyear == "last") {
endyear <- format(Sys.Date(), "%Y")
}
hist <- hist[hist$datayear <= endyear & hist$datayear >= startyear & hist$wb_code %in% country,]
}
dataiwant <- wbincomeclass(country = "IND", startyear = "first", endyear = 2010)
dataiwant <- wbincomeclass(country = "IND", startyear = "first", endyear = "last")
View(dataiwant)
library(devtools)
library(roxygen2)
document()
rm(list = c("wbincomeclass"))
displaycountrylist <- function() {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries$iso3c
}
displaycountrylist()
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
View(countries)
countrylist <- countries[, "iso3c", "country"]
countrylist <- countries[, countries$iso3c, countries$country]
countrylist <- countries[, c(countries$iso3c, countries$country)]
countrylist <- countries[, c(iso3c, country)]
countrylist <- countries[, c("iso3c", "country")]
View(countrylist)
displaycountrylist <- function() {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries[, c("iso3c", "country")]
return(countrylist)
}
displaycountrylist()
displaycountrylist <- function() {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries[, c("iso3c", "country")]
print(countrylist)
}
displaycountrylist()
return <- countrylist
displaycountrylist()
d <- displaycountrylist()
displaycountrylist <- function() {
newcache <- wbstats::wb_cache()
countries_df <- newcache$countries
countries <- countries_df[countries_df$region != "Aggregates",]
countrylist <- countries[, c("iso3c", "country")]
return(countrylist)
}
d <- displaycountrylist()
library(devtools)
library(roxygen2)
document()
rm(list = c("displaycountrylist"))
document()
temp_file <- "https://github.com/DivyanshiWadhwa/wbincomeclass/blob/master/OGHIST-revised.xlsx"
tab <- readxl::read_excel(temp_file)
GET(temp_file, write_disk(tf <- tempfile(fileext = ".xls")))
library(httr)
GET(temp_file, write_disk(tf <- tempfile(fileext = ".xlsx")))
df <- read_excel(tf, 2L)
df <- readxl::read_excel(tf, 2L)
df <- readxl::read_excel(tf)
